#var int side=0
#var float angle=90deg
#var float distance=100mm
#var vec2 start_point=(100mm,100mm)
var vec3 start_pose=(0mm,0mm,00deg)
#var vec2 point3=(100mm,200mm)

var float test_distance_goldo=1000mm
var float test_distance_goldo_back=-1000mm

var vec3 start_pose_goldo=(750mm,-1220mm,90deg)
var vec2 goldo_wp1=(750mm,110mm)
var vec2 goldo_wp2=(120mm,110mm)
var float goldo_left_angle=90deg
var float goldo_right_angle=-90deg

var float test_distance=100mm
var float test_angle=90deg
var vec3 test_yaw_speeds=(500mm,500mm,500mm)





begin sequence prematch_yellow
call prematch_common
end sequence

begin sequence prematch_purple
call prematch_common
end sequence

begin sequence match_yellow
propulsion.set_pose start_pose
propulsion.move_to pt1
wait_movement_finished pt1
call attrape_devant
propulsion.move_to pt3
wait_movement_finished start
propulsion.point_to pt1
propulsion.move_to start
wait_movement_finished start
pump.set_pwm pwm_pump_zero
end sequence

begin sequence match_purple
propulsion.set_pose start_pose
propulsion.move_to pt1
wait_movement_finished pt1
call attrape_devant
propulsion.move_to pt3
wait_movement_finished start
propulsion.point_to pt1
propulsion.move_to start
wait_movement_finished start
pump.set_pwm pwm_pump_zero
end sequence

begin sequence test
propulsion.rotate test_angle,test_yaw_speeds
propulsion.translate test_distance,test_yaw_speeds
end sequence

# Attrape et depose
begin sequence attrape_devant
arm.go_to_position sol_preprise
wait_arm_finished foo
arm.go_to_position sol_prise
pump.set_pwm pwm_pump_activated
delay delay2
arm.go_to_position sol_preprise
wait_arm_finished foo
end sequence

begin sequence depose_devant
arm.go_to_position sol_preprise
wait_arm_finished foo
pump.set_pwm pwm_pump_zero
delay delay1
end sequence

begin sequence depose_balance
arm.go_to_position acc_predepose
wait_arm_finished foo
pump.set_pwm pwm_pump_zero
end sequence

# Accelerateur

begin sequence pousse_accel
end sequence





begin sequence load_positions_yellow
mov3 start_pose,start_pose_yellow
end sequence

begin sequence prematch_common
arm.go_to_position stk_av_retrait
set_servo devant,servo_slider_gauche
propulsion.motors_enable
propulsion.enable
end sequence


begin sequence init_goldo
propulsion.motors_enable
propulsion.enable
propulsion.set_pose start_pose_goldo
end sequence


begin sequence test_goldo
propulsion.motors_enable
propulsion.enable
#propulsion.translate test_distance_goldo,test_yaw_speeds
propulsion.move_to goldo_wp1,test_yaw_speeds
propulsion.point_to goldo_wp2,test_yaw_speeds
propulsion.move_to goldo_wp2,test_yaw_speeds
end sequence


begin sequence test_goldo_back
propulsion.motors_enable
propulsion.enable
propulsion.translate test_distance_goldo_back,test_yaw_speeds
end sequence


#begin sequence disable_goldo
#propulsion.motors_disable
#propulsion.disable
#end sequence


