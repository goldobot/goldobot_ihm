#Depart Jaune
var vec3 departJ=(450mm,-1275mm,-90deg);
#Depart Violet
var vec2 departV=(450mm,1275mm,90deg);

#Palets depart jaune
var vec2 redium1J=(450mm,-1000mm)
var vec2 intermJ=(750mm,-800mm)
var vec2 redium2J=(750mm,-1000mm)
var vec2 greenium1J=(500mm,-1000mm)
var vec2 deposeRediumJ=(450mm,-1300mm)
var vec2 deposeGreeniumJ=(750mm,-1300mm)

#Palets depart violet
var vec2 redium1V=(450mm,1000mm)
var vec2 intermV=(750mm,800mm)
var vec2 redium2V=(750mm,1000mm)
var vec2 greenium1V=(1500mm,1000mm)
var vec2 deposeRediumV=(450mm,1300mm)
var vec2 deposeGreeniumJ=(750mm,1300mm)

#Accelerateur jaune
var vec3 accelJ=(20mm,200mm,-180deg)
var vec3 goldeniumJ=(40mm,715mm,-180deg)

#Accelerateur violet
var vec3 accelV=(20mm,200mm,180deg)
var vec3 goldeniumV=(40mm,-715mm,180deg)

var int pwm_pump_activated=300
var int pwm_pump_zero=0


begin sequence prematch_yellow
propulsion.set_pose departJ
end sequence

begin sequence match_yellow
propulsion.set_pose departJ
propulsion.point_to redium1J
wait_movement_finished redium1J
propulsion.move_to redium1J
wait_movement_finished redium1J
call attrape_palet
arm.go_to_position acc_depose
propulsion.point_to intermJ
wait_movement_finished intermJ
propulsion.move_to intermJ
wait_movement_finished intermJ
propulsion.point_to redium2J
wait_movement_finished redium2J
propulsion.move_to redium2J
wait_movement_finished redium2J
propulsion.point_to deposeRediumJ
wait_movement_finished deposeRediumJ
propulsion.move_to deposeRediumJ
call depose_palet
propulsion.point_to greenium1J
wait_movement_finished greenium1J
propulsion.move_to greenium1J
wait_movement_finished greenium1J
call attrape_palet
propulsion.point_to deposeGreeniumJ
wait_movement_finished deposeGreeniumJ
propulsion.move_to deposeGreeniumJ
call depose_palet
end sequence

begin sequence prematch_violet
propulsion.set_pose departV
end sequence

begin sequence match_yellow
propulsion.set_pose departV
propulsion.point_to redium1V
wait_movement_finished redium1V
propulsion.move_to redium1V
wait_movement_finished redium1V
call attrape_palet
arm.go_to_position acc_depose
propulsion.point_to intermV
wait_movement_finished intermV
propulsion.move_to intermV
wait_movement_finished intermV
propulsion.point_to redium2V
wait_movement_finished redium2V
propulsion.move_to redium2V
wait_movement_finished redium2V
propulsion.point_to deposeRediumV
wait_movement_finished deposeRediumV
propulsion.move_to deposeRediumV
call depose_palet
propulsion.point_to greenium1V
wait_movement_finished greenium1V
propulsion.move_to greenium1V
wait_movement_finished greenium1V
call attrape_palet
propulsion.point_to deposeGreeniumV
wait_movement_finished deposeGreeniumV
propulsion.move_to deposeGreeniumV
call depose_palet
end sequence

begin sequence attrape_palet
arm.go_to_position sol_preprise
delay delay1
arm.go_to_position sol_prise
pump.set_pwm pwm_pump_activated
delay delay2
arm.go_to_position sol_preprise
delay delay1
end sequence

begin sequence depose_palet
arm.go_to_position sol_preprise
delay delay1
arm.go_to_position sol_prise
pump.set_pwm pwm_pump_zero
delay delay1
arm.go_to_position sol_preprise
delay delay1
end sequence
